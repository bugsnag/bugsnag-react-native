{"version":3,"sources":["/Users/jamielynch/repos/bugsnag-react-native/examples/plain/node_modules/react-native/Libraries/vendor/emitter/EventEmitterWithHolding.js"],"sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nimport type EmitterSubscription from 'EmitterSubscription';\nimport type EventEmitter from 'EventEmitter';\nimport type EventHolder from 'EventHolder';\n\n/**\n * @class EventEmitterWithHolding\n * @description\n * An EventEmitterWithHolding decorates an event emitter and enables one to\n * \"hold\" or cache events and then have a handler register later to actually\n * handle them.\n *\n * This is separated into its own decorator so that only those who want to use\n * the holding functionality have to and others can just use an emitter. Since\n * it implements the emitter interface it can also be combined with anything\n * that uses an emitter.\n */\nclass EventEmitterWithHolding {\n  _emitter: EventEmitter;\n  _eventHolder: EventHolder;\n  _currentEventToken: ?Object;\n  _emittingHeldEvents: boolean;\n\n  /**\n   * @constructor\n   * @param {object} emitter - The object responsible for emitting the actual\n   *   events.\n   * @param {object} holder - The event holder that is responsible for holding\n   *   and then emitting held events.\n   */\n  constructor(emitter: EventEmitter, holder: EventHolder) {\n    this._emitter = emitter;\n    this._eventHolder = holder;\n    this._currentEventToken = null;\n    this._emittingHeldEvents = false;\n  }\n\n  /**\n   * @see EventEmitter#addListener\n   */\n  addListener(eventType: string, listener: Function, context: ?Object) {\n    return this._emitter.addListener(eventType, listener, context);\n  }\n\n  /**\n   * @see EventEmitter#once\n   */\n  once(eventType: string, listener: Function, context: ?Object) {\n    return this._emitter.once(eventType, listener, context);\n  }\n\n  /**\n   * Adds a listener to be invoked when events of the specified type are\n   * emitted. An optional calling context may be provided. The data arguments\n   * emitted will be passed to the listener function. In addition to subscribing\n   * to all subsequent events, this method will also handle any events that have\n   * already been emitted, held, and not released.\n   *\n   * @param {string} eventType - Name of the event to listen to\n   * @param {function} listener - Function to invoke when the specified event is\n   *   emitted\n   * @param {*} context - Optional context object to use when invoking the\n   *   listener\n   *\n   * @example\n   *   emitter.emitAndHold('someEvent', 'abc');\n   *\n   *   emitter.addRetroactiveListener('someEvent', function(message) {\n   *     console.log(message);\n   *   }); // logs 'abc'\n   */\n  addRetroactiveListener(\n    eventType: string,\n    listener: Function,\n    context: ?Object,\n  ): EmitterSubscription {\n    const subscription = this._emitter.addListener(\n      eventType,\n      listener,\n      context,\n    );\n\n    this._emittingHeldEvents = true;\n    this._eventHolder.emitToListener(eventType, listener, context);\n    this._emittingHeldEvents = false;\n\n    return subscription;\n  }\n\n  /**\n   * @see EventEmitter#removeAllListeners\n   */\n  removeAllListeners(eventType: string) {\n    this._emitter.removeAllListeners(eventType);\n  }\n\n  /**\n   * @see EventEmitter#removeCurrentListener\n   */\n  removeCurrentListener() {\n    this._emitter.removeCurrentListener();\n  }\n\n  /**\n   * @see EventEmitter#listeners\n   */\n  listeners(eventType: string) /* TODO: Annotate return type here */ {\n    return this._emitter.listeners(eventType);\n  }\n\n  /**\n   * @see EventEmitter#emit\n   */\n  emit(eventType: string, ...args: any) {\n    this._emitter.emit(eventType, ...args);\n  }\n\n  /**\n   * Emits an event of the given type with the given data, and holds that event\n   * in order to be able to dispatch it to a later subscriber when they say they\n   * want to handle held events.\n   *\n   * @param {string} eventType - Name of the event to emit\n   * @param {...*} Arbitrary arguments to be passed to each registered listener\n   *\n   * @example\n   *   emitter.emitAndHold('someEvent', 'abc');\n   *\n   *   emitter.addRetroactiveListener('someEvent', function(message) {\n   *     console.log(message);\n   *   }); // logs 'abc'\n   */\n  emitAndHold(eventType: string, ...args: any) {\n    this._currentEventToken = this._eventHolder.holdEvent(eventType, ...args);\n    this._emitter.emit(eventType, ...args);\n    this._currentEventToken = null;\n  }\n\n  /**\n   * @see EventHolder#releaseCurrentEvent\n   */\n  releaseCurrentEvent() {\n    if (this._currentEventToken) {\n      this._eventHolder.releaseEvent(this._currentEventToken);\n    } else if (this._emittingHeldEvents) {\n      this._eventHolder.releaseCurrentEvent();\n    }\n  }\n\n  /**\n   * @see EventHolder#releaseEventType\n   * @param {string} eventType\n   */\n  releaseHeldEventType(eventType: string) {\n    this._eventHolder.releaseEventType(eventType);\n  }\n}\n\nmodule.exports = EventEmitterWithHolding;\n"],"names":["EventEmitterWithHolding","emitter","holder","_classCallCheck","this","_emitter","_eventHolder","_currentEventToken","_emittingHeldEvents","eventType","listener","context","addListener","once","subscription","emitToListener","removeAllListeners","removeCurrentListener","listeners","_this$_emitter","_len","arguments","length","args","Array","_key","emit","apply","concat","_this$_eventHolder","_this$_emitter2","_len2","_key2","holdEvent","releaseEvent","releaseCurrentEvent","releaseEventType","module","exports"],"mappings":"4BAUA,qCAkBMA,cAaJ,SAAAA,EAAYC,EAAuBC,GAAqBC,EAAAC,KAAAJ,GACtDI,KAAKC,SAAWJ,EAChBG,KAAKE,aAAeJ,EACpBE,KAAKG,mBAAqB,KAC1BH,KAAKI,qBAAsB,gDAMjBC,EAAmBC,EAAoBC,GACjD,OAAOP,KAAKC,SAASO,YAAYH,EAAWC,EAAUC,gCAMnDF,EAAmBC,EAAoBC,GAC1C,OAAOP,KAAKC,SAASQ,KAAKJ,EAAWC,EAAUC,kDAwB/CF,EACAC,EACAC,GAEA,IAAMG,EAAeV,KAAKC,SAASO,YACjCH,EACAC,EACAC,GAOF,OAJAP,KAAKI,qBAAsB,EAC3BJ,KAAKE,aAAaS,eAAeN,EAAWC,EAAUC,GACtDP,KAAKI,qBAAsB,EAEpBM,6CAMUL,GACjBL,KAAKC,SAASW,mBAAmBP,mDAOjCL,KAAKC,SAASY,0DAMNR,GACR,OAAOL,KAAKC,SAASa,UAAUT,gCAM5BA,GAAiC,IAAA,IAAAU,EAAAC,EAAAC,UAAAC,OAAXC,EAAW,IAAAC,MAAAJ,EAAA,EAAAA,EAAA,EAAA,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAXF,EAAWE,EAAA,GAAAJ,UAAAI,IACpCN,EAAAf,KAAKC,UAASqB,KAAdC,MAAAR,GAAmBV,GAAnBmB,OAAiCL,wCAkBvBd,GAAiC,IAAA,IAAAoB,EAAAC,EAAAC,EAAAV,UAAAC,OAAXC,EAAW,IAAAC,MAAAO,EAAA,EAAAA,EAAA,EAAA,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAXT,EAAWS,EAAA,GAAAX,UAAAW,GAC3C5B,KAAKG,oBAAqBsB,EAAAzB,KAAKE,cAAa2B,UAAlBN,MAAAE,GAA4BpB,GAA5BmB,OAA0CL,KACpEO,EAAA1B,KAAKC,UAASqB,KAAdC,MAAAG,GAAmBrB,GAAnBmB,OAAiCL,IACjCnB,KAAKG,mBAAqB,mDAOtBH,KAAKG,mBACPH,KAAKE,aAAa4B,aAAa9B,KAAKG,oBAC3BH,KAAKI,qBACdJ,KAAKE,aAAa6B,mEAQD1B,GACnBL,KAAKE,aAAa8B,iBAAiB3B,aAIvC4B,EAAOC,QAAUtC","file":"300.js"}